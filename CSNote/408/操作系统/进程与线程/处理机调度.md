# 处理机调度

## 调度的概念、层次

1.  **高级调度**
   
     -  概念：按一定的规则从外存中挑选一个处于后背队列的作业, 给他分配内存等必要的资源, 建立相应的进程
     -  调度发生：外存 -> 内存
     -  发生频率：低, 每个作业只调入一次, 调出一次
     -  对进程状态的影响：无 -> 创建态 -> 就绪态
       
2.  **中级调度**
    
     -  概念：将暂时不能运行的进程调至外存等待, 当其具备运行条件且内存有空余时由中级调度决定是否重新调入内存
     -  调度发生：内存 -> 外存
     -  发生频率：中等
     -  对进程状态的影响：挂起态 -> 就绪态; 阻塞挂起 -> 阻塞态

    **挂起态** 
    
    暂时调到外存等待的进程状态为挂起态, 挂起的 PCB 会被组织为**挂起队列**
   
3.  **低级调度**
      
     -  概念：(进程调度) 从就绪队列选择一个进程, 分配处理机.
     -  调度发生：内存 -> CPU
     -  发生频率：最高 (几十毫秒一次)
     -  对进程状态的影响：就绪态 -> 运行态

**七状态模型**:

## 进程调度与切换

**进程切换的时机**

-  **需要进程调度的时机**
  
  1.  进程主动放弃处理机: 进程正常终止、运行发生异常、进程主动请求阻塞（I/O)
  2.  进程被动放弃处理机: 时间片用完, 有更高级的进程进入就绪队列

-  **不能进行进程调度的场景**
  
  1. 处理中断的过程中
  2. 进程在操作系统的程序临界区
  3. 在原子操作中(原语)

**临界资源**

一段时间内只允许一个进程使用的资源, 各进程互斥的访问临界资源

**临界区**

访问临界资源的代码

**内核程序临界区**

用来访问某种内核数据结构, 比如进程的就绪队列

**狭义的进程调度与进程切换的区别**

-  **狭义的进程调度**
  
  指从一个就绪队列中选中一个要运行的进程, (可以是被暂停执行的进程, 也可能是另一个进程, 后一种情况下需要进程切换)
  
-  **广义的进程调度**

  包含选择一个进程和进程切换两个步骤, 进程切换主要完成了:
  
-  **进程切换**
  