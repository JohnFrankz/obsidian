# 物联网导论讲义

## 问题引入

在万物互联的时代，各种物联网应用产生了大量有价值的数据。处理这些大量数据的会导致巨大的能源消耗。这占了电信运营商用电量和运营支出的大头。最大限度地减少电信运营商的开支至关重要。因此低功耗也变得越来越重要。

（PPT）（物联网的快速发展离不开物联网设备（如传感器、智能移动设备、监控设备）的支持。物联网设备收集的海量数据通过 APs 转发到数据中心，并用于模式识别、监控、AR（增强现实）、VR（虚拟现实）等许多应用。降低能耗是设备供应商的主要需求之一。设备可以将数据传输到可用的 APs 进行处理。）

## 项目引言

可是不能盲目的追求低功耗。如何在节省能源的同时保持一定的服务质量，周期性资源模型是最有效的方法之一。

（（一张ppt）介绍周期性资源模型： 周期性资源的概念最早是由 S. Shirero, M. Takashi, and H. Kei 在1999年正式提出的，对于资源 ，设备制造商通常使用预先调度来改善延迟。主要思想是基站周期性地为终端用户分配无线资源，用户可以直接使用预先分配的资源，不再需要向网络侧请求资源，减少了资源请求过程的时间。）

通常，APS 的无线资源需要保持总是可用的，这会消耗大量能量，因此APS采用周期性资源模型赖达到节约能源的效果。这会让APS的资源不再始终可以供设备使用，而是定期的供终端设备使用。

IEEE（电气和电子工程师协会）802.11ac WiFi 标准 [3] 在空闲时间为终端设备定义了 PSM（省电模式），以最大限度地降低能耗。本文采用与物联网设备类似的PAS机制，使APs的周期性资源得到充分利用，物联网设备尽可能降低能耗。论文中考虑的问题是最小化设备的活动持续时间，同时确保设备在其活动状态期间可以使用所有必需的资源。

>**(PPT)（引入概念）PAS机制**
PAS 机制的基本思想是设备可以在预定义的时间段内进入睡眠模式，并且由于其收发器电路将关闭，因此消耗的功率更少。当设备切换到主动模式时，它会向可用的 AP 传输数据并使用 AP 的资源。

而物联网设备连接到 APs 后，APs 会为其分配必要的周期性资源。采用了PAS（Periodic Activation and Sleep）机制后。 IoT 设备可以休眠一段预定义的时间，然后返回到活动模式，而不是连续活动状态。设备周期性地而不是随机地向AP传输数据，以减少设备的活动持续时间和设备等待可用周期性资源的时间。



## 项目介绍

目前有很多关于周期性资源方面的研究，比如：为实时系统引入了一种节能的周期性资源模型算法，以最大限度地减少能源使用。Tchamgoue等人引入能量感知周期性资源模型和能量感知接口模型来抽象系统中组件的实时性和能量需求。

到目前为止，关于周期性资源的研究大多只关注基站本身的能耗和时延。

同样也有许多研究集中在周期性激活技术上:

1. `DRX`  (不连续接收）是一种使用周期性激活技术的节能解决方案，已在几代无线网络上证明有效。这些机制通过关闭/打开射频接口来延长设备的电池寿命。在 [5] 中，他们提出了一种机器学习机制来预测人类对话的持续时间。通过在静音期开始时调节切换到关闭状态，来达到节省能源的效果。这可以在用户设备上应用DRX睡眠模式，
2. 定期睡眠计划，传感器定期唤醒以检测目标。

然而，这些研究只是集中在分析PAS技术与器件性能之间的关系上。由于缺乏合适的方法来设置物联网设备的 PAS 参数值。

结合上述问题，我们采用 PAS 机制将 IoT 设备能耗问题与 AP 的周期性资源模型相关联。同时我们专注于优化和设置物联网设备的PAS参数，这可以降低物联网设备的能耗。

为了最小化活动状态的持续时间，我们制定了一个整数线性规划模型。在整数规划问题中，目标函数的最大化或最小化取决于不等式和等式约束以及对部分或全部变量的完整性限制。

## 原理讲解

整数线性规划问题定义如下：

让 $P_F = \{ x | A x >= b, x \in\Bbb R_+^n\}, c \in \Bbb R^n, b \in \Bbb R^m, A \in \Bbb R^{m \times n}$：

$$
min \quad z_{IP} = c^T x \tag{1}
$$
$$
x \in P_F \cap \Bbb Z^n \tag{2}
$$

集合 $P_F$ 称为可行域，可行区域 $P_F$ 称为整数，如果它等于整数点的凸包 $P_I$。在这种情况下，可以通过求解其 LP-relaxation 在多项式时间内计算出最优解。因此，在制定整数线性规划时，应该尝试找到等式和不等式约束，以使 $P_F$ 成为整数。结果表明，对于每个有界有理不等式系统，都有一个整数多面体。然而，对于大多数问题来说，很难表述这些额外的不等式，并且它们的数量可能是指数级的。幸运的是，我们的优化问题中的不等式是有界的，所以我们可以在多项式时间内解决这个问题。

> 1. 贴出维基百科的图片，以及凸包的图片。
> 2. 解释 多项式时间
> 3. 

因为我们主要的目的是要获得最小活动状态的持续时间，因此我们对相关的一些问题进行定义：
1.  **物联网设备中的 PAS 机制**
   PAS 机制的基本概念如图 1 所示。启用后，IoT 设备将设置为活动模式，并开始使用 AP 的可用资源在子帧期间传输数据，这也称为活动间隔。 Active Interval 是 PAS 周期的一部分。当 Active Interval 结束时，设备切换到 Sleep Interval 以达到节能目的，同时关闭射频模块。 PAS 周期由活动间隔和睡眠间隔组成。此外，模式切换时间预计非常短，例如[9]中的35μs，这比子帧的长度短得多，即1ms。因此，我们假设模式切换时间可以忽略不计，并且设备不需要时间在活动模式和睡眠模式之间切换。
   ![Fig. 1. Periodic activation and sleep mechanism illustration](../image/PCLEIOT/fig1.png)
   -  PAS循环
     它表示活动间隔周期性重复的周期。 PAS 周期的长度表示为 $T_C$。它以毫秒 (ms) 为单位指定。其值为所有所需资源周期的LCM
   -  活动间隔
     活动间隔是 PAS 周期开始的部分，其中物联网设备开始使用 AP 资源传输数据。 $T_A$ 表示活动间隔的持续时间。该值的范围为 1 到 200 毫秒。
   - 睡眠间隔
     它也是循环的一部分。在睡眠间隔期间，IoT 设备被设置为睡眠模式并停止使用 AP 的资源。睡眠间隔的持续时间表示为 $T_S$。

2. **系统模型**

我们的工作针对多个周期性资源模型。接入点的多个资源在时域上是周期性占用的。特别地，在时域中，每个周期都将资源分配给设备。资源集 $\frak R = \{\gamma_1,\gamma_2,...,\gamma_\rm{N}\}$ 由 N 种周期资源，例如上行链路和下行链路带宽，例如上行链路和下行链路带宽、物理内核和内存。每个资源 $\gamma_i \in \frak R$ 由二元组 $(p_i, o_i)$ 表征，其中 $p_i$ 是资源周期，资源 $\gamma_i$ 在时刻 $o_i$ 首先被占用。我们进一步假设一个资源周期是一个整数，即 $p_i \in \Bbb N_+$，并且满足 $0 < o_i \leq p_i$。 AP资源 $\gamma_i$ 的占用时间可以用线性函数表示:
$$
f_i(x_i) = p_i x_i + o_i, x_i \in \Bbb Z \tag{3}
$$
其中 $x_i$ 是周期数。

例如，给出周期性资源集 $\frak R = \{ \gamma_1, \gamma_2, \gamma_3 \}$，其中 $\gamma_1 = A = (20, 1)$, $\gamma_2 = B = (10, 4)$ 和 $\gamma_3 = C =(30, 16)$。三种资源的占用时间如图2所示。$\gamma_{1j}$（即 $A_j$）表示第 $j^{th} \; \gamma_1$，其中 $j$ 是 $\gamma_1$ 的索引。

![Fig. 2. IoT devices connect Access Point with multiple periodic resources](../image/PCLEIOT/fig2.png)

设备集合 $D = \{d_1, d_2, ..., d_M \}$ 有 $M$ 个设备。设备 $d_k \in D$需要资源集$R_k =\{ \gamma_{k_1}, \gamma_{k_2}, ..., \gamma_{k_n} \}$，其中 $R_K \subseteq \frak R$，设备 $d_k$ 需要的资源类型数为 $n$。每个设备 $d_k$ 由二元组 $(s_k, l_k)$ 表征，其中 $s_k$ 是活动间隔的第一个开始时间，$d_K$ 在 $l_k$ 个子帧（即 $T_A$）内保持活动状态。

3. ** 问题表述**

我们假设每个设备只关联一个 AP，并且在连接期间所需的资源集是不变的。此外，AP资源的周期值是预定义的并且为所有设备已知。本文考虑的问题是如何安排物联网设备的活动时间，使物联网设备处于活动模式的持续时间最小化，并在其活动间隔内为设备提供所有所需的资源。该设备在每个 LCM 子帧周期性地被激活以进行数据传输。它的正式定义如下：

给定资源集 $R_k = \{ \gamma_{k_1}, \gamma_{k_2}, ..., \gamma_{k_n} \}$ 其中 $R_K \in \frak R$ 且 $\gamma_{k_j} = \Big( p_{\gamma_{k_j}}, o_{\gamma_{k_j}} \Big)$ 。设备 $d_k$ 在该范围内的每个所需资源至少被覆盖一次，表示如下，具体以设备 $d_k$ 的目标为例如图3所示。在示例中，存在三种类型的资源。 $f_i$ 表示资源 $r_i$ 激活时间的周期函数。 $len - 1$ 是三种资源之间的差异。当 $f_1$ 为最大值，$f_3$ 为最小值时，目标 $len$ 达到最小值（即 $T_A$):
$$
T_A = max \; \{f_{\gamma_{k_1}}, f_{\gamma_{k_2}}, ..., f_{\gamma_{k_n}} \} \; - \; min \; \{f_{\gamma_{k_1}}, f_{\gamma_{k_2}}, ..., f_{\gamma_{k_n}} \} + 1 \tag{4}
$$
目标：
$$
l_k = min \; T_A \tag{5}
$$
受限于：
$$
f_{\gamma_{k_j}} \leq 2 \; * \; LCM, \enspace \forall \gamma_{k_j} \in R_k \tag{6}
$$
$$
|f_{\gamma_{k_i}} - f_{\gamma_{k_j}}| \; \leq \; T_A,\enspace \forall \gamma_{k_i}, \gamma_{k_j} \in R_{k} \tag{7}
$$
$$
T_{A}+ T_{S}= T_{C}\tag{8}
$$
$$
1 \leq T_{A} \leq 200, \enspace T_{A} \in \Bbb Z \tag{9}
$$
上面给出了针对优化问题考虑的约束。Eq.6描述了可以在区间 $[0, 2*LCM]$中找到最优解。当量。Eq.7 表明对于 $R_k$ 集合中的任意两个资源，它们的时间间隔不会超过活动间隔的最小持续时间。这意味着最小活动间隔必须涵盖设备 $d_k$ 的所有必需资源。 Eq.8 表示 PAS 周期由 Active Interval 和 Sleep Interval 组成。Eq.9中，$T_A$ 的取值属于固定区间 $[1, 200]$。
![Fig. 3. Objective function illustration](../image/PCLEIOT/fig3.png)

## 算法讲解


## 实验

## 结果对比
